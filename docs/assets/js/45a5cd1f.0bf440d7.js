"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[365],{4993:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(2983);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4084:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(2206),r=(n(2983),n(4993));const o={sidebar_position:0,sidebar_label:"Concepts"},i="Concepts and definitions",l={unversionedId:"concepts",id:"concepts",title:"Concepts and definitions",description:"The library gives you a piece of state in the memory and allows you to have",source:"@site/docs/concepts.md",sourceDirName:".",slug:"/concepts",permalink:"/react-async-states/docs/concepts",draft:!1,editUrl:"https://github.com/incepter/react-async-states/edit/main/packages/docs/docs/concepts.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{sidebar_position:0,sidebar_label:"Concepts"},sidebar:"tutorialSidebar",previous:{title:"Intro",permalink:"/react-async-states/docs/intro"},next:{title:"First steps",permalink:"/react-async-states/docs/tutorial/first-steps"}},s={},p=[{value:"The state",id:"the-state",level:2},{value:"The producer",id:"the-producer",level:2},{value:"The <code>source</code> object",id:"the-source-object",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"concepts-and-definitions"},"Concepts and definitions"),(0,r.kt)("p",null,"The library gives you a piece of state in the memory and allows you to have\nfull control over it from all over your application."),(0,r.kt)("p",null,"In this section, we will see the major concepts that are used.\nMainly, there are three that you should be aware of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The state: How the library stores it internally"),(0,r.kt)("li",{parentName:"ul"},"The producer: The function that gives the state succeeded data"),(0,r.kt)("li",{parentName:"ul"},"The source object: How to interact and and manipulate the state from anywhere")),(0,r.kt)("h2",{id:"the-state"},"The state"),(0,r.kt)("p",null,"The library's state value is composed of four properties, and has three\ntypescript generic parameters:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"type State<TData, TArgs extends unknown[] = [], TError = Error> = { ... }\n")),(0,r.kt)("p",null,"Where:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TData"),": Refers to the type of the data when ",(0,r.kt)("inlineCode",{parentName:"li"},"success")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TArgs"),": Refers to the type of the ",(0,r.kt)("inlineCode",{parentName:"li"},"args")," that we will use to run the function"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TError"),": Refers to the type of the Error when ",(0,r.kt)("inlineCode",{parentName:"li"},"error"))),(0,r.kt)("p",null,"And here are the properties composing the ",(0,r.kt)("inlineCode",{parentName:"p"},"state"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"T")),(0,r.kt)("td",{parentName:"tr",align:null},"The returned data from your function")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"status")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"initial"),",",(0,r.kt)("inlineCode",{parentName:"td"},"pending"),",",(0,r.kt)("inlineCode",{parentName:"td"},"success"),",",(0,r.kt)("inlineCode",{parentName:"td"},"error")),(0,r.kt)("td",{parentName:"tr",align:null},"The current status of the state, that goes with the data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"props")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ProducerProps")),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("inlineCode",{parentName:"td"},"args")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"payload")," that led to this state")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"timestamp")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},"the time (",(0,r.kt)("inlineCode",{parentName:"td"},"Date.now()"),") where the state was constructed")))),(0,r.kt)("h2",{id:"the-producer"},"The producer"),(0,r.kt)("p",null,"The producer is the function associated to our state that will be responsible\nfor giving us the succeeded data. It is optional, but you will provide it most\nof the time, especially for all async flows."),(0,r.kt)("p",null,"Straight from the codebase, here is the definition of a producer:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"export type Producer<TData, TArgs extends unknown[] = [], TError = Error> = (\n    props: ProducerProps<TData, TArgs, TError>\n) => TData | Promise<TData>\n")),(0,r.kt)("p",null,"It may be:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Any synchronous function returning a value"),(0,r.kt)("li",{parentName:"ul"},"Any async function: using the ",(0,r.kt)("inlineCode",{parentName:"li"},"async/await")," syntax, or returning a ",(0,r.kt)("inlineCode",{parentName:"li"},"promise")),(0,r.kt)("li",{parentName:"ul"},"Not defined. Yes, you can have no producer at all. In this case, you will be\nusing ",(0,r.kt)("inlineCode",{parentName:"li"},"setState")," to set the state directly and immediately.")),(0,r.kt)("p",null,"The producer's props is an object containing many information such as:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"args"),": The arguments that it was ran with"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"signal"),": an Abort signal used to pass directly to fetch or axios to easily\nsupport cancellations."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"onAbort"),": Allows you to register abort callbacks"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"getState"),": In case of living producers, such as the ones that connect\nto websockets or so, this comes handy to append to the previous state etc.")),(0,r.kt)("p",null,"And other properties that we will see later."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The producer's execution is wrapped inside try catch block, so any thrown\nerror will be received as ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," with ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," status:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'state = {\n  data: e,// the catched error\n  status: "error",\n  props: {}, // the producer\'s parameter when it was ran\n  timestamp: 123,\n}\n'))),(0,r.kt)("h2",{id:"the-source-object"},"The ",(0,r.kt)("inlineCode",{parentName:"h2"},"source")," object"),(0,r.kt)("p",null,"This is a special object obtained from either the library hooks as a named\nproperty, or via ",(0,r.kt)("inlineCode",{parentName:"p"},"createSource"),"."),(0,r.kt)("p",null,"It is a token having all the necessary methods to have full control over\nthe state with its linked producer."),(0,r.kt)("p",null,"This object has many methods, some of them are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"run(...args)")," allows you to run your producer"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"getState()")," gives you the current state"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"setState(value, status?)")," allows you to set the state to any value"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"subscribe(cb)")," allows you to manually subscribe to this state. You won't\nuse this API much."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"runc({ args, onSuccess, onError })")," allows you to trigger a run with\ncallbacks to that specific run. I call them: per-run-callbacks. They remove\nthe issue that you may had with other libraries when you define some callbacks\nin the used hook, then use many instances of that component, resulting in\nthe callbacks triggering several times.")),(0,r.kt)("p",null,"And so many other properties."))}d.isMDXComponent=!0}}]);